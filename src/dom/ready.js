(function(NS){ function onReady(fn){ if(document.readyState==='loading') document.addEventListener('DOMContentLoaded', fn,{once:true}); else fn(); } function patchHistory(){ const p=history.pushState, r=history.replaceState; const fire=()=>window.dispatchEvent(new Event('locationchange')); history.pushState=function(){const out=p.apply(this,arguments); fire(); return out;}; history.replaceState=function(){const out=r.apply(this,arguments); fire(); return out;}; window.addEventListener('popstate', fire);} NS.dom.ready={ onReady, patchHistory }; })(window.LCMD);
